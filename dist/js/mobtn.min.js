/*!
 * mobtn 1.0.0
 * Creative Morph Buttons Using CSS3 
 * @dependencies 
 *  1. classy.js <http://faso.me/classy>
 *  2. modernizr
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * built at 1427854339504 
 * Copyright 2015, FASO.ME <http://www.faso.me>
 */
!function(t,n){"object"==typeof exports?module.exports=n(require("./classy")):"function"==typeof define&&define.amd?define(["classy"],n):t.MOBtn=n(t.classy)}(this,function(t){function n(t,n){for(var i=n.length,e=!1,o=0;i>o;o++)if(t===n[o]){e=!0;break}return e}function i(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return t}function e(t,n){this.el=t,this.options=i({},this.options),i(this.options,n),this._init()}var o={transitions:Modernizr.csstransitions,animations:Modernizr.cssanimations},s={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},r=(s[Modernizr.prefixed("animation")],{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}),a=r[Modernizr.prefixed("transition")];return e.prototype.options={autoPos:!0,lastAnimatedPropertiesInClosing:["opacity"],lastAnimatedPropertiesInOpening:["width","height","left","top"],clActive:"active",cssBtn:"button",cssContent:".mobtn-content",closeEl:"",onBeforeOpen:function(){return!1},onAfterOpen:function(){return!1},onBeforeClose:function(){return!1},onAfterClose:function(){return!1}},e.prototype._init=function(){this.button=this.el.querySelector(this.options.cssBtn),this.expanded=!1,this.contentEl=this.el.querySelector(this.options.cssContent),this._initEvents()},e.prototype._initEvents=function(){var t=this;if(this.button.addEventListener("click",function(){t.show()}),""!==this.options.closeEl){var n=this.el.querySelector(this.options.closeEl);n&&n.addEventListener("click",function(){t.hide()})}},e.prototype.hide=function(){if(this.isAnimating||!this.expanded)return!1;this.isAnimating=!0;var i=this,e=function(s){if(s.target!==this)return!1;if(o.transitions){if(!n(s.propertyName,i.options.lastAnimatedPropertiesInClosing))return!1;this.removeEventListener(a,e)}i.isAnimating=!1,t.remove(i.el,i.options.clActive),i.options.onAfterClose(),i.expanded=!1};this.afterHideShow(e)},e.prototype.afterHideShow=function(n){var i=this;o.transitions?this.contentEl.addEventListener(a,n):n();var e=this.button.getBoundingClientRect();t.add(this.contentEl,"no-transition"),this.options.autoPos&&(this.contentEl.style.left="auto",this.contentEl.style.top="auto"),setTimeout(function(){return i.options.autoPos&&(i.contentEl.style.left=e.left+"px",i.contentEl.style.top=e.top+"px"),i.expanded?(t.remove(i.contentEl,"no-transition"),void t.remove(i.el,i.options.clActive)):void setTimeout(function(){t.remove(i.contentEl,"no-transition"),t.add(i.el,i.options.clActive)},25)},25)},e.prototype.show=function(){if(this.isAnimating||this.expanded)return!1;this.isAnimating=!0;var t=this,i=function(e){if(e.target!==this)return!1;if(o.transitions){if(!n(e.propertyName,t.options.lastAnimatedPropertiesInOpening))return!1;this.removeEventListener(a,i)}t.isAnimating=!1,t.options.onAfterOpen(),t.expanded=!0};this.afterHideShow(i)},e.prototype.toggle=function(){return this.expanded?this.hide():void this.show()},e});