/*!
 * mobtn 1.0.0
 * Creative Morph Buttons Using CSS3 
 * @dependencies 
 *  1. classy.js <http://faso.me/classy>
 *  2. modernizr
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * built at 1427770111333 
 * Copyright 2015, FASO.ME <http://www.faso.me>
 */
!function(t,n){"object"==typeof exports?module.exports=n(require("./classy")):"function"==typeof define&&define.amd?define(["classy"],n):t.MOBtn=n(t.classy)}(this,function(t){function n(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return t}function i(t,i){this.el=t,this.options=n({},this.options),n(this.options,i),this._init()}var e={transitions:Modernizr.csstransitions,animations:Modernizr.cssanimations},o={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},r=(o[Modernizr.prefixed("animation")],{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}),s=r[Modernizr.prefixed("transition")];return i.prototype.options={closeEl:"",onBeforeOpen:function(){return!1},onAfterOpen:function(){return!1},onBeforeClose:function(){return!1},onAfterClose:function(){return!1}},i.prototype._init=function(){this.button=this.el.querySelector("button"),this.expanded=!1,this.contentEl=this.el.querySelector(".mobtn-content"),this._initEvents()},i.prototype._initEvents=function(){var t=this;if(this.button.addEventListener("click",function(){t.show()}),""!==this.options.closeEl){var n=this.el.querySelector(this.options.closeEl);n&&n.addEventListener("click",function(){t.hide()})}},i.prototype.hide=function(){if(this.isAnimating||!this.expanded)return!1;this.isAnimating=!0;var n=this,i=function(o){if(o.target!==this)return!1;if(e.transitions){if("opacity"!==o.propertyName)return!1;this.removeEventListener(s,i)}n.isAnimating=!1,t.remove(n.el,"active"),n.options.onAfterClose(),n.expanded=!1};this.afterHideShow(i)},i.prototype.afterHideShow=function(n){var i=this;e.transitions?this.contentEl.addEventListener(s,n):n();var o=this.button.getBoundingClientRect();t.add(this.contentEl,"no-transition"),this.contentEl.style.left="auto",this.contentEl.style.top="auto",setTimeout(function(){return i.contentEl.style.left=o.left+"px",i.contentEl.style.top=o.top+"px",i.expanded?(t.remove(i.contentEl,"no-transition"),void t.remove(i.el,"open")):void setTimeout(function(){t.remove(i.contentEl,"no-transition"),t.add(i.el,"open")},25)},25)},i.prototype.show=function(){if(this.isAnimating||this.expanded)return!1;this.isAnimating=!0;var t=this,n=function(i){if(i.target!==this)return!1;if(e.transitions){if("width"!==i.propertyName&&"height"!==i.propertyName&&"left"!==i.propertyName&&"top"!==i.propertyName)return!1;this.removeEventListener(s,n)}t.isAnimating=!1,t.options.onAfterOpen(),t.expanded=!0};this.afterHideShow(n)},i.prototype.toggle=function(){return this.expanded?this.hide():void this.show()},i});